<?xml version="1.0"?>
<config>
    <modules>
        <Swarming_SsoIdp>
            <version>0.1.0</version>
        </Swarming_SsoIdp>
    </modules>
    <global>
        <models>
            <swarming_ssoidp>
                <class>Swarming_SsoIdp_Model</class>
                <resourceModel>swarming_ssoidp_resource</resourceModel>
            </swarming_ssoidp>
            <swarming_ssoidp_resource>
                <class>Swarming_SsoIdp_Model_Resource</class>
            </swarming_ssoidp_resource>
        </models>
        <blocks>
            <swarming_ssoidp>
                <class>Swarming_SsoIdp_Block</class>
            </swarming_ssoidp>
        </blocks>
        <helpers>
            <swarming_ssoidp>
                <class>Swarming_SsoIdp_Helper</class>
            </swarming_ssoidp>
        </helpers>
        <events>
            <core_collection_abstract_load_before>
                <observers>
                    <swarming_ssoidp>
                        <type>singleton</type>
                        <class>swarming_ssoidp/observer_registerVendorAutoload</class>
                        <method>execute</method>
                    </swarming_ssoidp>
                </observers>
            </core_collection_abstract_load_before>
            <resource_get_tablename>
                <observers>
                    <swarming_ssoidp>
                        <type>singleton</type>
                        <class>swarming_ssoidp/observer_registerVendorAutoload</class>
                        <method>execute</method>
                    </swarming_ssoidp>
                </observers>
            </resource_get_tablename>
            <add_spl_autoloader>
                <observers>
                    <swarming_ssoidp>
                        <type>singleton</type>
                        <class>swarming_ssoidp/observer_registerVendorAutoload</class>
                        <method>execute</method>
                    </swarming_ssoidp>
                </observers>
            </add_spl_autoloader>
        </events>
    </global>
    <frontend>
        <routers>
            <swarming_ssoidp>
                <use>standard</use>
                <args>
                    <module>Swarming_SsoIdp</module>
                    <frontName>sso</frontName>
                </args>
            </swarming_ssoidp>
            <customer>
                <args>
                    <modules>
                        <Swarming_SsoIdp before="Mage_Customer">Swarming_SsoIdp</Swarming_SsoIdp>
                    </modules>
                </args>
            </customer>
        </routers>
        <layout>
            <updates>
                <swarming_riselms>
                    <file>swarming/ssoidp.xml</file>
                </swarming_riselms>
            </updates>
        </layout>
    </frontend>
    <default>
        <swarming_ssoidp>
            <general>
                <enabled_slo>1</enabled_slo>
                <entity_id>swarming_ssoidp/idp/metadata</entity_id>
                <metadata_url>swarming_ssoidp/idp/metadata</metadata_url>
                <single_sing_on_url>swarming_ssoidp/idp/signon</single_sing_on_url>
                <single_logout_url>swarming_ssoidp/idp/logout</single_logout_url>
                <allowed_seconds_skew>120</allowed_seconds_skew>
            </general>
            <security>
                <want_authn_signed>1</want_authn_signed>
                <want_logout_request_signed>1</want_logout_request_signed>
                <want_logout_response_signed>1</want_logout_response_signed>
                <assertion_encrypted>1</assertion_encrypted>
                <assertion_signed>1</assertion_signed>
                <messages_signed>1</messages_signed>
                <signature_algorithm>http://www.w3.org/2000/09/xmldsig#rsa-sha1</signature_algorithm>
                <digest_algorithm>http://www.w3.org/2000/09/xmldsig#sha1</digest_algorithm>
                <encrypted_method_key>http://www.w3.org/2001/04/xmlenc#rsa-1_5</encrypted_method_key>
                <encrypted_method_data>http://www.w3.org/2001/04/xmlenc#aes128-cbc</encrypted_method_data>
            </security>
            <sp>
                <name_id>email</name_id>
                <assertion_consumer_binding>urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST</assertion_consumer_binding>
            </sp>
        </swarming_ssoidp>
    </default>
</config>
